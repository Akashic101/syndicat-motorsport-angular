<p-table
  stripedRows
  #dt
  [value]="leagues"
  dataKey="id"
  [rows]="10"
  [rowsPerPageOptions]="[10, 25, 50]"
  [loading]="loading"
  [paginator]="true"
  [globalFilterFields]="['name', 'sim', 'status']"
  [tableStyle]="{ 'min-width': '75rem' }"
>
  <ng-template #header>
    <tr>
      <th style="width: 22%">Name</th>
      <th style="width: 18%">Sim</th>
      <th style="width: 15%">Rounds</th>
      <th style="width: 15%">Drivers</th>
      <th style="width: 12%">Status</th>
      <th style="width: 8%"></th>
    </tr>
    <tr>
      <th>
        <p-columnFilter
          type="text"
          field="name"
          placeholder="Search by name"
          ariaLabel="Filter Name"
        ></p-columnFilter>
      </th>
      <th>
        <p-columnFilter
          type="text"
          field="sim"
          placeholder="Search by Sim"
          ariaLabel="Filter Sim"
        ></p-columnFilter>
      </th>
      <th></th>
      <th></th>
      <th>
        <p-columnFilter field="status" matchMode="equals" [showMenu]="false">
          <ng-template #filter let-value let-filter="filterCallback">
            <p-select
              [ngModel]="value"
              [options]="statuses"
              (onChange)="filter($event.value)"
              placeholder="Select Status"
              [showClear]="true"
            >
              <ng-template let-option #item>
                <p-tag
                  [value]="option.value"
                  [severity]="getSeverity(option.value)"
                />
              </ng-template>
            </p-select>
          </ng-template>
        </p-columnFilter>
      </th>
      <th></th>
    </tr>
  </ng-template>

  <ng-template #body let-league>
    <tr>
      <td>{{ league.name }}</td>
      <td>{{ league.sim }}</td>
      <td>{{ league.rounds }}</td>
      <td>{{ league.drivers }}</td>
      <td>
        <p-tag
          [value]="league.status"
          [severity]="getSeverity(league.status)"
        />
      </td>
      <td>
        <a
          *ngIf="league.status === 'planned'"
          href="https://discord.gg/v7bbYHSY3p?event=1347884719890501693"
          target="_blank"
          severity="secondary"
          rel="noopener noreferrer"
          class="p-button secondary font-bold"
        >
          Sign up now!
        </a>
      </td>
    </tr>
  </ng-template>

  <ng-template #emptymessage>
    <tr>
      <td colspan="6">No leagues found.</td>
    </tr>
  </ng-template>
</p-table>
